{% extends "base.html" %}
{% load static %}
<head>

    {# jQuery #}
    <script type="text/javascript" src="{% static "events/add_form_script.js" %}"></script>
    {# Vue.js CDN #}
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>
{% block body %}
    <div id="app">
        <div class=container>
            <div class="jumbotron">
                <h1>{{ event }}</h1>
                <p>A little history about the event here</p>
                <p>Maybe a notice</p>
                <p>Date</p>
                <p>Location</p>

            </div>
            <div class="container">
                <div class="row">
                    <div class="col-md-8">
                        <form class="form-horizontal" method="POST" action="">
                            {% csrf_token %}
                            {{ formset.management_form }}
                            <div style="background-color: #ffe673; padding: 20px 60px 20px 60px; margin-right: 15px;"
                                 class="row form-row">
                                <div class="input-group">
                                    {% for form in formset %}
                                        {{ form.as_p }}
                                        <div v-bind:id="item_id" class="input-group-append">
                                        </div>
                                    {% endfor %}
                                    <div style="padding-left: 60px; background-color: black">
                                        <p v-on:click="addForm" class="btn btn-primary btn-lg">Add Form</p>
                                        <p v-on:click="regexit" class="btn btn-primary btn-lg">RegExIt</p>
                                        <p v-on:click="formID" class="btn btn-primary btn-lg">formID</p>
                                    </div>
                                    <br>
                                    <br>
                                </div>
                            </div>
                            <div style="padding-left: 60px; background-color: black">
                                <button type="submit" class="btn btn-primary btn-lg">Finish Registration</button>
                            </div>
                        </form>
                    </div>
                    <div class="col-sm-offset-7 " style="position: fixed; top: 500px; left: 150px; width: auto;">
                        <div style="position: relative; top: 0px; " class="col-md-8">
                            <div>[[message]]</div>
                            <br>
                            <div v-html='paypal_button'></div>
                            <br>
                            <input v-model="message">
                            <button v-on:click="reverseMessage">Reverse it</button>
                        </div>
                    </div>
                    <br>
                </div>
            </div>
        </div>
    </div>

    <script>
        new Vue({
            delimiters: ['[[', ']]'],
            el: '#app',
            data: {
                message: 'Total Price: $160.00',
                paypal_button: '<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">\n' +
                    '<input type="hidden" name="cmd" value="_s-xclick">\n' +
                    '<input type="hidden" name="hosted_button_id" value="4X3VTSLSHYJP8">\n' +
                    '<input type="image" src="https://www.paypal.com/en_US/i/btn/btn_buynow_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">\n' +
                    '<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="0" height="0">\n' +
                    '</form>\n',
                item_id: '',
                count: 0,
                list_of_form: []
            },
            methods: {
                reverseMessage: function () {
                    this.message = this.message.split('').reverse().join('')
                },
                addForm: function () {
                    this.count++
                    let total_forms = document.getElementById('id_form-TOTAL_FORMS')
                    total_forms.name = 'form-TOTAL_FORMS'
                    total_forms.value = this.count+1
                    console.log(this.count)
                },
                vue_django_form: function () {
                    console.log("I'm in here")
                    console.log(form)

                },
                formID: function () {
                    {#let formID = 'id_form-'+this.count+this.#}
                    {#this.item_id = String(formID)#}
                    {#console.log(this.item_id)#}
                    for (let form in formset()) {
                        console.log(form)
                    }
                },

                list_out_forms: function () {
                    for (form in formset()) {
                        console.log(form)
                    }
                }
            }
        })
    </script>
{% endblock %}

